<html>
  <head>
    <title>Lipton</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="./css/general.css" />
    <link rel="stylesheet" type="text/css" href="./css/animate.css" />
    <script src='./js/general.js'></script>
    <script src='./js/jquery.js'></script>
  </head>
  <body class='bg'>
    <div class='curtain'></div>
    <div class="main-block">
      <img src='./assets/lipton_bg_02.png' class='full-img' />
      <a href='./index.html' class='return'>
        <img class='btn-tea' src='./assets/lipton_button_close.png'>
      </a>

      <div class='check-btn cold_warm' data-type='cold_warm' data-data='warm' style='top: 26%; left: 20%'>
        <img class='full-img hidden' src='./assets/lipton_button_right.png'>
      </div>
      <div class='check-btn cold_warm' data-type='cold_warm' data-data='cold' style='top: 26%; left: 52%'>
        <img class='full-img hidden' src='./assets/lipton_button_right.png'>
      </div>
      <div class='check-btn q_z' data-type='q_z'style='top: 41.7%; left: 20%'>
        <img class='full-img hidden' src='./assets/lipton_button_right.png'>
      </div>
      <div class='check-btn q_z' data-type='q_z' style='top: 41.7%; left: 52%'>
        <img class='full-img hidden' src='./assets/lipton_button_right.png'>
      </div>
      <div class='check-btn q_b' data-type='q_b' style='top: 57%; left: 18%'>
        <img class='full-img hidden' src='./assets/lipton_button_right.png'>
      </div>
      <div class='check-btn q_b' data-type='q_b' style='top: 57%; left: 54%'>
        <img class='full-img hidden' src='./assets/lipton_button_right.png'>
      </div>

      <div class="text-center animated pulse animated-infinite" style="position: absolute; width: 50%; top: 66%; left: 25%">
        <img id='submit' class='full-img' src='./assets/lipton_button_next.png'>
      </div>
    </div>
    <script>
      const base_data = {
        cold: [
          {
            t1: '你的专属新滋味是',
            t2: '回甘可口小清新',
            t3: '蜜桃红茶',
            t4: '5.png',
            t5: '搭配梨口感更棒哦！'
          },
          {
            t1: '你的专属新滋味是',
            t2: '酸甜清爽更自然',
            t3: '柠檬红茶',
            t4: '7.png',
            t5: '搭配青橘口感更棒哦！'
          },
          {
            t1: '你的专属新滋味是',
            t2: '清凉一夏南海风',
            t3: '芒果红茶',
            t4: '4.png',
            t5: '搭配百香果口感更棒哦！'
          },
          {
            t1: '你的专属新滋味是',
            t2: '香甜可口最养颜',
            t3: '芦荟蜜茶',
            t4: '2.png',
            t5: '搭配雪梨口感更棒哦！'
          }
        ],
        warm: [
          {
            t1: '你的专属新滋味是',
            t2: '口感浓郁芳香醇厚',
            t3: '红茶',
            t4: '1.png',
            t5: '抽取你的狗年专属茶签，喝好茶，赢好运！'
          },
          {
            t1: '你的专属新滋味是',
            t2: '清香鲜纯自然甘醇',
            t3: '绿茶',
            t4: '3.png',
            t5: '抽取你的狗年专属茶签，喝好茶，赢好运！'
          },
          {
            t1: '你的专属新滋味是',
            t2: '茉莉清香纯正自然',
            t3: '茉莉花茶',
            t4: '6.png',
            t5: '抽取你的狗年专属茶签，喝好茶，赢好运！'
          }
        ]
      }
      $('.check-btn').click(function () {
        const type = $(this).data('type')
        if ($(this).children().hasClass('hidden')) {
          const that = this 
          let a = $('.' + type).filter(function () {
            return that !== this
          }).children().addClass('hidden')
        }
        $(this).children().toggleClass('hidden')
      })  
      $('#submit').click(function () {
        let data = $('.cold_warm').filter(function () {
          return !$(this).children().hasClass('hidden')
        }).data('data')
        let chosen_data = {}
        if (data === 'cold') {
          chosen_data = base_data.cold[Math.floor(Math.random() * 4)]
        } else {
          chosen_data = base_data.warm[Math.floor(Math.random() * 3)]
        }
        if (!data) {
          alert('请选择选项')
          return
        }
        location.href = location.origin + '/result.html' + '?' + 't1=' + chosen_data.t1 + '&' + 't2=' + chosen_data.t2 + '&' + 't3=' + chosen_data.t3 + '&' +  't4=' + chosen_data.t4 + '&' +  't5=' + chosen_data.t5
      })
    </script>
  </body>
</html>